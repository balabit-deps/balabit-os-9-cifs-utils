commit cf63240489431e98033e599a7c9437b59494a2e4
From: Ritvik Budhiraja <rbudhiraja@microsoft.com>
Date: Thu, 30 Jan 2025 14:13:10 +0000
Subject: cifs-utils: add documentation for upcall_target
 Update man page with documentation for upcal_target
 mount parameter.
 
 Signed-off-by: Ritvik Budhiraja <rbudhiraja@microsoft.com>
 Signed-off-by: Steve French <stfrench@microsoft.com>
Bug-Ubuntu: https://bugs.launchpad.net/bugs/2099914
Bug: https://ubuntu.com/security/CVE-2025-2312
Origin: backport, https://git.samba.org/?p=cifs-utils.git;a=commit;h=cf63240489431e98033e599a7c9437b59494a2e4
Last-Update: 2025-04-02

Index: cifs-utils-6.14/mount.cifs.rst
===================================================================
--- cifs-utils-6.14.orig/mount.cifs.rst	2025-04-02 17:39:04.708675870 +1300
+++ cifs-utils-6.14/mount.cifs.rst	2025-04-02 17:39:04.706675845 +1300
@@ -588,6 +588,21 @@
   integer that can hold values between 0 and a maximum value of 2^30 \*
   HZ (frequency of timer interrupt) setting.
 
+upcall_target=arg
+  Determines the namespace in which upcalls from the SMB filesystem should be handled.
+  Allowed values are:
+  - ``mount`` - Resolve upcalls to the host namespace.
+  - ``app`` - Resolve upcalls in the namespace of the calling thread (application).
+  Default value is ``app``.
+  This option is useful in environments like Kubernetes, where the mount
+  may be performed by a driver pod on behalf of an application running
+  in a separate container. It ensures that Kerberos credentials and other
+  user-specific data are accessed in the correct namespace.
+  By specifying ``app``, upcalls can be resolved in the application's namespace,
+  ensuring the correct credentials are used. ``mount`` allows resolution in the
+  host namespace, which may be necessary when credentials or configurations
+  are managed outside the container.
+
 noposixpaths
   If unix extensions are enabled on a share, then the client will
   typically allow filenames to include any character besides '/' in a
